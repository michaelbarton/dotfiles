---
# Based on elnappos dotfiles (https://github.com/elnappo/dotfiles)
- name: Playbook to manage dotfiles
  hosts: localhost
  connection: local
  vars:
    venv_path: "{{ ansible_env.HOME }}/.venvs/nivm"
    python_version: "3.11"  # Adjust this to your preferred Python version
  tasks:
    - name: Create folder
      ansible.builtin.file:
        path: "{{ item }}"
        state: directory
      loop:
        - "{{ ansible_user_dir }}/.config/fish/"
        - "{{ ansible_user_dir }}/.config/nvim/autoload"
        - "{{ ansible_user_dir }}/.config/nvim/ftplugin"
        - "{{ ansible_user_dir }}/.config/plugged/"
        - "{{ ansible_user_dir }}/cache"
        - "{{ ansible_user_dir }}/.bin"
        - "{{ ansible_user_dir }}/.hammerspoon"

    - include_tasks: tasks/python.yml
      when: ansible_hostname == "Michaels-MacBook-Air"
      tags:
        - python

    - include_tasks: tasks/launch_agents.yml
      when: ansible_hostname == "Michaels-MacBook-Air"
      tags:
        - agents

    - include_tasks: tasks/link_files.yml
      tags:
        - links
